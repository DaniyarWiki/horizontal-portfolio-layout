<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>Horizontal Portfolio Layout With CSS3 Animations and jQuery</title>
  <meta name="language" content="en" />
  <meta name="description" content="Freelance Front-End Web Developer - Lebanon" />
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <meta name="keywords" content="web developer, wordpress, themes, templates, jquery, css3, html5, Lebanon, web, development" />  
  <link rel="shortcut icon" href="favicon.ico">
  <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5shiv.js"></script>
    <script src="http://css3-mediaqueries-js.googlecode.com/files/css3-mediaqueries.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="css/shCore.min.css" />
  <link rel="stylesheet" href="../../css/screen.css" />
</head>
<body>
  <header role="banner" class="clearfix main-header">
    <div class="wrapper clearfix">
      <a href="http://sarasoueidan.com/index.html" class="logo">Sara Soueidan</a>
      <nav class="social">
        <ul>
            <li><a href="http://twitter.com/SaraSoueidan" class="icon-twitter-3"></a></li>
            <li><a href="http://codepen.io/SaraSoueidan"  class="icon-codepen-01"></a></li>
            <li><a href="http://github.com/SaraSoueidan" class="icon-github-01"></a></li>
            <li><a href="http://pinterest.com/SaraSoueidan"  class="icon-pinterest"></a></li>
            <li><a href="http://dribbble.com/SaraSoueidan"  class="icon-dribbble"></a></li>
            <li><a href="http://feeds.feedburner.com/sarasoueidan"  class="icon-rss"></a>
          </ul>
      </nav>
      <nav role="navigation" class="main-nav clearfix">
        <ul class="clearfix" id="nav">
          <li><a href="http://sarasoueidan.com/index.html">Blog</a></li>
          <li><a href="http://sarasoueidan.com/about.html">About</a></li>    
          <li><a href="http://sarasoueidan.com/demos.html">Demos</a></li>
          <li><a href="http://sarasoueidan.com/resume.html">Resume</a></li>
          <li><a href="http://sarasoueidan.com/contact.html">Contact</a></li>
        </ul>
      </nav>
      
    </div>
  </header>
  <div class="pad"></div>

  <div class="hero">
    <img src="images/demo.png"/>
  </div>

  <div class="upper-full-width-wrapper clearfix">
      <div class="upper-wrapper clearfix">
        <aside class="upper-left-sidebar">
          <p class="blogpost__meta"><span>Tutorial</span>Published June 15<sup>th</sup>, 2013</p>  
        </aside>
        <section class="upper-main">
          <h1>Horizontal Portfolio Layout with CSS3 Animations &amp; jQuery</h1>
        </section>
        <aside class="upper-right-sidebar">
          <div class="kudos" data-amount="0" data-url=""></div>
        </aside>
      </div>
  </div>

  <div class="full-width-wrapper">  
    <div class="wrapper wrapper--post clearfix"> 
      <aside class="left-sidebar left-sidebar--blogpost">
          <ol class="table-of-contents">
              <li><a href="#markup">The Markup</a></li>
              <li><a href="#css">The CSS</a></li>
              <li><a href="#javascript">The Javascript</a></li>
          </ol>
      </aside>
  
      <section class="main post-wrapper clearfix">
          <div class="buttons clearfix">
            <a href="demo/index.html"  class="button button--blog-post">View Live Demo</a>
            <a href=""  class="button button--blog-post"><span class="icon-github-01"></span> Download Source</a>
          </div>
          <div class="demo-resources" style="margin:20px 0;">
            <p class="note">Browser Support: 
              <span class="browser-logo"><img src="images/chrome.png" height="35" width="35" /></span>
              <span class="browser-logo"><img src="images/firefox.png" height="35" width="35" /></span>
              <span class="browser-logo"><img src="images/safari.png" height="35" width="35" /></span>
              <span class="browser-logo"><img src="images/opera.png" height="35" width="35" /></span>
              <span class="browser-logo"><img src="images/ie.png" height="35" width="35" /></span>
              <span style="font-style:italic; font-size:.9em;">(latest versions)</span>
            </p>
            <p class="note">For the sake of brevity in the example code, I am using the un-prefixed CSS properties, but you will find them in the downloadable source code on Github.<br/> 
            </p>
          </div>
                
          <p>In this tutorial today we're going to create a horizontal portfolio layout with cool hover effects inspired by those on <a href="http://www.guitouxx.com/#/en/home">Guillaume Tomasi's personal website</a>. The website is made in Flash, so I thought it would be nice to recreate the flash hover effect of the portfolio items using CSS3 animations and transitions, and some jQuery to replicate the image pan effect on hover.</p>
          <p>I've also added a simple falling down effect on scroll, where the portfolio items fall down as soon as they enter the visible area of the viewport.</p>
          <p class="note"><em>The artwork used in this demo is used with the permission of their owner <a href="https://twitter.com/vladstudio">Vlad Gerasimov</a>. You can find the original images/wallpapers and more on his website <a href="http://www.vladstudio.com/home/">VladStudio.com</a>.</em></p>
          <p>So, let's get started!</p>
          


          <h3 id="markup">The Markup</h3>
          
          Our list of items is literally a list of items each one with a class <code>item</code>. Each item contains a <code>figure</code> which in turn contains a <code>.view</code> container which wraps an image inside it, and a footer with two paragraph tags that contain the meta information for each image, and a small date tag with its own animation.

          <pre class="brush:html;">
            <ul class="portfolio-items">
              <li class="item">
                <figure>
                  <div class="view">
                   <img src="images/1.jpg" />
                  </div>
                  <figcaption>
                    <p><span><a href="http://www.vladstudio.com/wallpaper/?thetwoandthebubbles">The Two and The Bubbles</a></span></p>
                    <p><span>By Vlad Gerasimov</span></p>
                  </figcaption>
                </figure>
                <div class="date">2005</div>
              </li>
              <li>
                <!-- second item -->
              </li>
              <li>
                <!-- third item -->
              </li>
              <!-- and so forth -->
            </ul>
          </pre>

          <h3 id="css">The CSS</h3>
          <p>Let's start with basic styles for the items before we get into the animations and hover effects.</p>

          <pre class="brush:css;">
            .portfolio-items {
              height: 400px;
              overflow-x: scroll;
              overflow-y: hidden;
              white-space: nowrap;
              margin-bottom: 30px;
              position: relative;
            }
            .portfolio-items > li {
              display: inline-block;
              /*aligning items by top baseline makes sure the baseline doesn't change once the hover
              effect is fired and therefore the other items stay put*/
              vertical-align: top;
            }
            .item {
              width: 300px;
              height: 202px;
              margin: 150px 20px 0;
              padding: 5px;
              border-radius:2px;
              box-shadow: 0px 10px 10px -5px rgba(0,0,0,0.5);
              background-color: white;
              font-size: 14px;
              /*initially all items are moved 300px up and faded out and rotated, they will fade 
              into view and back to position later via javascript*/
              opacity: 0;
              position: relative;
              top: -300px;
              transform: rotate(-135deg);
              transition: all .3s ease, opacity 2s ease,  top 1s ease;
            }
            /*even items will be 100px lower than their siblings*/
            .item:nth-child(even) {
              margin-top: 100px;
            }
           
          </pre>
          <p>Now that all items have been styled and placed, we'll define the styles for the inner components of each item.</p>
          <p>The figure will take up the full width of the parent. The image will get both a height and a width, and we'll apply a transition to the items so that they change smoothly on hover.</p>
          <p>The figcaption with the metadata will be positioned absolutely, and will be invisible at first so it gets a 0 opacity value.</p>
          <pre class="brush:css;">
            figure{
              width:100%;
              height:100%;
            }
            .view {
              overflow: hidden;
              width: 100%;
              height: 190px;
              position: relative;
            }
            .view img {
              width: 300px;
              height: 190px;
              transition: width .3s ease;
              position: absolute;
            }

            figcaption {
              height: 60px;
              width: 100%;
              padding: 0;
              position: absolute;
              bottom: 0;
              overflow: hidden;
              opacity: 0;
            }
            figcaption p {
              font: bold 12px/18px "Arial", sans-serif;
              text-transform: uppercase;
              padding: 0 10px;
              margin:  5px 0;
              width:100%;
              background-color: #f0f0f0;
              color:#333;
            }
            /*the text of the paragraph tags in the footer(figcaption) is initially hidden to the left*/
            figcaption span {
              left: -100%;
              opacity: 0;
            }
            figcaption a{
               color: #CC320F; 
            }

            .date {
              z-index: 1;
              width: 50px;
              height: 30px;
              line-height: 30px;
              color: #fff;
              font-weight: bold;
              text-align: center;
              border-radius: 1px;
              background-color: #CC320F;
              position: absolute;
              bottom: 30px;
              left: 15px;
              transition: transform 0.5s cubic-bezier(0.12, 1.6, 0.91, 0.92);
            }

          </pre>
          <p>Now that we have all the items styled, we'll define what happens when each item is hovered.</p>
          <pre class="brush:css;">
            .item:hover {
              height: 270px;
              padding: 15px;
              transform: translateY(-68px);
            }
            .item:hover .date {
              transform: translate3d(0, 61px, 0);
            }
            .item:hover figcaption {
              animation: show .25s ease-in .120s forwards;
            }
            .item:hover p:nth-of-type(1) span{
              animation: slideOut .25s ease-out .15s forwards;
            }
            .item:hover p:nth-of-type(2) span{
              animation: slideOut .2s  ease-out .3s forwards;
            }
            .item:hover .view {
              height: 170px;
            }
            .item:hover .view img {
              top: -20px;
              left: -20px;
            }
          </pre>
          <p>When the item is hovered, it increases in height, its padding is increased, thus decreasing the view or "viewport" for each image, while the image keeps its original size. We'll later add a panning effect to the image which makes it possible to view the whole image despite the fact that its viewport got smaller, by changing its position as the mouse moves over it; this is why the image is  moved 20px to the left and upwards when its field of view decreases. We'll manipulate these positions with Javascript later.</p>
          <p>Also on hover, the date tag slides down, the footer is shown and the metadata slides in.</p>
          <p>Here are the keyframes defined for the above animations:</p>
          <pre class="brush:css;">
            /*animation to show the metadata*/
            @keyframes slideOut {
              0% {
                left: -100%;
                opacity: 0;
              }
              95% {
                left: 0;
                opacity: 0.2;
              }
              100% {
                opacity: 1;
                left: 0;
              }
            }
            /*animation to show the footer, which will simply up its opacity to 1*/
            @keyframes show {
              to {
                opacity: 1;
              }
            }
          </pre>
          <p>When we defined the initial styles for the items, we defined their position and opacity so that they are <i>not</i> visible at first, but once they are within the viewport's visible area, they get a class (via Javascript) which makes them "fall down" into position. Here is the class added to the items on scroll:</p>
          <pre class="brush:css;">
            .falldown {
              top: 0;
              opacity: 1;
              /*they are also initially rotated, and are rotated back to their normal position*/
              transform: rotate(0);
            }
          </pre>
          <p>For extra styling purposes, we're gonna style the scrollbar of the items' list. But bear in mind that these styles are supported only in Webkit browsers. You can, of course, use <a href="http://jscrollpane.kelvinluck.com/">one of</a> <a href="http://designhuntr.com/custom-jquery-scrollers/">several</a> javascript <a href="http://slodive.com/web-development/jquery-scroll/">plugins</a> available to provide cross-browser scrollbar styles if it's necessary to your overall design.</p>
          <pre class="brush:css;">
            ::-webkit-scrollbar {
              width: 7px;
              height: 7px;
              cursor: pointer;
            }
            ::-webkit-scrollbar-track {
              background-color: #ddd;
              border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb {
              border-radius: 10px;
              background-color: #C4290D;
            }
          </pre>
          <p>That's all the styling we need and all animations needed for the hover effect. Now we'll start defining the panning effect with Javascript and handling the list scroll function.</p>
          <h3 id="javascript">The Javascript</h3>
          <p>We'll start by defining the scrolling function which will first check for the position of an item on the screen, and return true if the item is in the visible area of the viewport, but it only checks horizontally.</p>
          <pre class="brush: js;">
            //checks if element it is called on is visible (only checks horizontally)
            (function($) {
              var $window = $(window);
              
              $.fn.isVisible = function(){
                var $this = $(this),
                  Left = $this.offset().left,
                  visibleWidth = $window .width();

                return Left < visibleWidth;  
              }
            })(jQuery);
          </pre>
          <p>Now we're going to define the function what will call this function on the portfolio items to check for their visibility.</p>
          <pre class="brush: js;">
            (function($){
              var list = $('.portfolio-items'),
                  showVisibleItems = function(){
                  list.children('.item:not(.falldown)').each(function(el, i){
                      var $this = $(this);
                      if($this.isVisible()){
                        $this.addClass('falldown');
                      }
                    });
                  };
                  //....
          </pre>
          <p>We'll want to call this function as soon as the page has loaded to check for visible items and add the <code>.falldown</code> class to all items that should be visible in the beginning. Then, we'll want to call this function whenever the list is scrolled as well.</p>
          <pre class="brush:js;">
                //....
                //initially show all visible items before any scroll starts
                showVisibleItems();
                
                //then on scroll check for visible items and show them
                list.scroll(function(){
                  showVisibleItems();
                });
          </pre>
          <p>The last thing we're going to do is add the panning effect for the images on hover. What this function does is that it checks the position of the mouse cursor when it moves over each image, and moves the image along with the movement of the cursor. It measures the distance between the cursor and the image's <code>view</code> boundaries, and then divides that by the part of the image that's hidden beyond the borders of the <code>view</code>, thus making sure the image does not move any extra than it should. The function calculations should make it clearer:</p>
          <pre class="brush:js;">
            list.on('mousemove','img', function(ev){
                var $this = $(this),
                    posX = ev.pageX, 
                    posY = ev.pageY,
                    data = $this.data('cache');
              //cache necessary variables
                  if(!data){
                    data = {};
                    data.marginTop = - parseInt($this.css('top')),
                    data.marginLeft = - parseInt($this.css('left')),
                    data.parent = $this.parent('.view'),
                    $this.data('cache', data); 
                  }

              var originX = data.parent.offset().left,
                  originY =  data.parent.offset().top;
              
                 //move image
                 $this.css({
                    'left': -( posX - originX ) / data.marginLeft,
                    'top' : -( posY - originY ) / data.marginTop
                 }); 
            });
          </pre>
          <p>The only thing remaining is making sure the image returns to its initial position when the mouse leaves the item so that everything goes back to its initial state:</p>
          <pre class="brush:js;">
            list.on('mouseleave','.item', function(e){
              $(this).find('img').css({
                'left': '0', 
                'top' : '0'
              });
            });
          </pre>
          <p>Aaand we're done! :) I hope you liked this simple hover effect and found it useful.</p>
          <p class="note"><em>Thanks a lot <a href="http://twitter.com/FWeinb">Fabrice </a> <a href="http://blog.weinberg.me/">Weinberg</a> for helping me optimize and organize my Javascript code. :)</em></p>



          <div class="buttons clearfix">
            <a href="demo/index.html"  class="button button--blog-post">View Live Demo</a>
            <a href="https://github.com/SaraSoueidan/windows8-animations"  class="button button--blog-post"><span class="icon-github-01"></span> Download Source</a>
          </div>

          <a href="http://sarasoueidan.com/" class="full-blog-link"> &#9668; Go To Full Blog </a>



          <div id="disqus_thread" style="clear:both; margin-top:50px;"></div>
            <script type="text/javascript">
                var disqus_shortname = 'sarasoueidan';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>  
      </section> 
      <aside class="right-sidebar">

      </aside>
    </div><!--end wrapper-->
  </div><!--end full-width-wrapper-->

  <footer role="contentinfo" class="main-footer  clearfix">
    <div class="wrapper">
      <div class="scrolltop">
         &#9650;
      </div>
      <nav role="navigation" class="footer-nav main-footer-nav clearfix">
        <ul class="clearfix">
          <li><a href="http://twitter.com/SaraSoueidan">Twitter</a></li>
          <li><a href="http://codepen.io/SaraSoueidan">Codepen</a></li>
          <li><a href="http://github.com/SaraSoueidan">Github</a></li>
          <li><a href="http://pinterest.com/SaraSoueidan" >Pinterest</a></li>
          <li><a href="http://feeds.feedburner.com/sarasoueidan">RSS</a></li>
          <li><a href="http://sarasoueidan.com/license.html">License &amp; Terms of Use</a></li>
        </ul>
      </nav>
      <p class="copyright">Copyright &copy; Sara Soueidan 2013<br/>Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by-nc/3.0/" class="license">Creative Commons Attribution-NonCommercial 3.0 License</a>. </p>
    </div><!--end footer wrapper-->
  </footer>

  <script async src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/jquery-1.8.2.min.js"><\/script>')</script>
  <script src="js/syntaxhighlighterscripts.min.js"></script>
  <script src="https://raw.github.com/TimPietrusky/KudosPlease/master/js/kudosplease-min.js"></script>
  <script type="text/javascript">
      SyntaxHighlighter.all();
  </script>
  <script type="text/javascript" src="../../js/scripts.js"></script>
  <script async type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37248572-1']);
      _gaq.push(['_setDomainName', 'sarasoueidan.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  
</body>
</html>